<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>METIS | Strategic Network</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background-color: #ffffff;
            color: #171a20;
            letter-spacing: -0.01em;
        }
        /* 테슬라 스타일의 슬라이릿한 스크롤바 */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-thumb { background: #e2e2e2; border-radius: 10px; }
        
        .sidebar-brand {
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        .sidebar-brand.active {
            border-left-color: #171a20;
            background-color: #f9f9f9;
            font-weight: 600;
        }
        .dealer-tab {
            transition: all 0.3s;
            border-bottom: 2px solid transparent;
            white-space: nowrap;
        }
        .dealer-tab.active {
            border-bottom-color: #171a20;
            color: #000;
            font-weight: 600;
        }
        .branch-card {
            border: 1px solid #f0f0f0;
            transition: all 0.2s;
        }
        .branch-card:hover {
            border-color: #d0d0d0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }
        input, textarea {
            border: 1px solid #eeeeee;
            border-radius: 4px;
            padding: 12px;
            width: 100%;
            background-color: #fbfbfb;
            font-size: 14px;
        }
        input:focus {
            outline: none;
            border-color: #171a20;
            background-color: #fff;
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden bg-white">

    <!-- 1단계: 브랜드 사이드바 -->
    <aside class="w-64 border-r border-gray-100 flex flex-col">
        <div class="p-8">
            <h1 class="text-xl font-bold tracking-tighter italic">METIS</h1>
            <p class="text-[9px] text-gray-400 tracking-widest uppercase mt-1">Intelligence</p>
        </div>
        <nav class="flex-1 overflow-y-auto px-4 space-y-1" id="brand-nav">
            <!-- Brands will be injected here -->
        </nav>
    </aside>

    <!-- 메인 컨텐츠 영역 -->
    <main class="flex-1 flex flex-col">
        
        <!-- 2단계: 브랜드 헤더 및 딜러사 탭 -->
        <header class="pt-10 px-10 border-b border-gray-50">
            <div class="flex justify-between items-end mb-6">
                <div>
                    <h2 id="current-brand" class="text-3xl font-semibold tracking-tight uppercase">브랜드명</h2>
                    <p class="text-xs text-gray-400 mt-1">공식 딜러사별 지점 현황</p>
                </div>
                <div class="flex space-x-3">
                    <button class="text-[11px] font-bold border border-gray-200 px-5 py-2 rounded-full hover:bg-gray-50 uppercase tracking-widest">Download Report</button>
                </div>
            </div>
            
            <!-- 딜러사 탭 리스트 -->
            <div class="flex space-x-8 overflow-x-auto no-scrollbar" id="dealer-tabs">
                <!-- Dealers will be injected here -->
            </div>
        </header>

        <!-- 3단계: 지점 카드 리스트 -->
        <section class="flex-1 overflow-y-auto p-10 bg-[#fafafa]">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="branch-grid">
                <!-- Branches will be injected here -->
            </div>
        </section>
    </main>

    <!-- 상세 편집 패널 (Right Draw) -->
    <div id="side-panel" class="fixed inset-y-0 right-0 w-[480px] bg-white shadow-2xl z-50 transform translate-x-full transition-transform duration-300 ease-in-out border-l border-gray-100 overflow-y-auto">
        <div class="p-12">
            <div class="flex justify-between items-center mb-10">
                <span id="panel-dealer-tag" class="text-[10px] font-bold bg-gray-100 px-3 py-1 rounded text-gray-500 uppercase tracking-widest">DEALER NAME</span>
                <button onclick="closePanel()" class="text-3xl font-light hover:text-gray-400">&times;</button>
            </div>

            <h3 id="panel-branch-title" class="text-3xl font-semibold mb-10 tracking-tight italic">지점명</h3>

            <div class="space-y-8">
                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">C-Level Decision Maker</label>
                    <input type="text" id="in-exec" placeholder="대표, 본부장 등 성함 및 직함">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">Branch Manager</label>
                    <input type="text" id="in-mgr" placeholder="지점장 성함">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">Contact Number</label>
                    <input type="text" id="in-tel" placeholder="다이렉트 연락처">
                </div>
                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">Strategic Log</label>
                    <textarea id="in-notes" rows="8" placeholder="상담 내용, 지점 특이사항, 향후 전략 기입"></textarea>
                </div>
                <button onclick="saveData()" class="w-full bg-[#171a20] text-white py-5 rounded-md font-semibold text-sm hover:bg-black transition shadow-lg">DATA SAVE</button>
            </div>
        </div>
    </div>

    <script>
        // 고도화된 계층형 유통망 데이터베이스
        const DATA = {
            "Mercedes-Benz": {
                "한성자동차": ["강남본점", "청담", "삼성", "서초", "방배", "분당", "인천", "부산", "대전"],
                "효성자동차": ["강북", "서대문", "안양", "포항", "광주", "울산"],
                "KCC오토": ["금천", "부천", "영등포", "제주"],
                "모터원": ["일산", "의정부", "파주"],
                "경성모터스": ["강서"]
            },
            "BMW": {
                "코오롱모터스": ["강남", "삼성", "분당", "광주", "대구", "부산"],
                "도이치모터스": ["성수", "한남", "미사", "수원", "원주"],
                "한독모터스": ["용산", "서초", "방배", "수원"],
                "바바리안모터스": ["송도", "일산", "목동"]
            },
            "Audi": {
                "고진모터스": ["도산대로", "수원", "천안", "광주"],
                "태안모터스": ["도곡", "방배", "일산", "목동"],
                "위본모터스": ["서초", "분당", "판교"]
            },
            "Porsche": {
                "SSCL": ["대치", "서초", "분당", "인천", "부산"],
                "아우토승": ["용산", "수원"],
                "세영모빌리티": ["송파", "성수"]
            },
            "Volvo": {
                "에이치모터스": ["강남", "서초", "수원", "인천"],
                "아이비모터스": ["광주", "순천", "전주"],
                "코오롱오토": ["천안", "청주"]
            },
            "Lexus": {
                "천우모터스": ["용산", "일산", "광진"],
                "D&T": ["강남", "대치", "서초"]
            }
        };

        let currentBrand = "";
        let currentDealer = "";

        // 초기화
        const brandNav = document.getElementById('brand-nav');
        Object.keys(DATA).forEach((brand, idx) => {
            const btn = document.createElement('button');
            btn.className = "sidebar-brand w-full text-left px-4 py-3 text-sm sidebar-item";
            btn.innerText = brand;
            btn.onclick = () => selectBrand(brand, btn);
            brandNav.appendChild(btn);
            if(idx === 0) selectBrand(brand, btn);
        });

        function selectBrand(brand, el) {
            currentBrand = brand;
            document.querySelectorAll('.sidebar-brand').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('current-brand').innerText = brand;

            const dealerTabs = document.getElementById('dealer-tabs');
            dealerTabs.innerHTML = "";

            const dealers = Object.keys(DATA[brand]);
            dealers.forEach((dealer, idx) => {
                const tab = document.createElement('button');
                tab.className = "dealer-tab pb-4 text-xs font-medium uppercase tracking-widest text-gray-400";
                tab.innerText = dealer;
                tab.onclick = () => selectDealer(dealer, tab);
                dealerTabs.appendChild(tab);
                if(idx === 0) selectDealer(dealer, tab);
            });
        }

        function selectDealer(dealer, el) {
            currentDealer = dealer;
            document.querySelectorAll('.dealer-tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');

            const grid = document.getElementById('branch-grid');
            grid.innerHTML = "";

            DATA[currentBrand][dealer].forEach(branch => {
                const card = document.createElement('div');
                card.className = "branch-card bg-white p-8 cursor-pointer rounded-sm";
                card.onclick = () => openPanel(dealer, branch);
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-6">
                        <span class="text-[9px] font-bold text-gray-400 tracking-widest uppercase">${dealer}</span>
                        <div class="w-1.5 h-1.5 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"></div>
                    </div>
                    <h4 class="text-xl font-semibold italic tracking-tighter">${branch}</h4>
                    <div class="mt-6 space-y-2 border-t border-gray-50 pt-4 text-[10px] text-gray-400 font-bold uppercase tracking-tighter">
                        <div class="flex justify-between"><span>Exec</span><span class="text-black">미기입</span></div>
                        <div class="flex justify-between"><span>Manager</span><span class="text-black">미기입</span></div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function openPanel(dealer, branch) {
            document.getElementById('panel-dealer-tag').innerText = dealer;
            document.getElementById('panel-branch-title').innerText = branch;
            
            // 데이터 필드 초기화
            document.getElementById('in-exec').value = "";
            document.getElementById('in-mgr').value = "";
            document.getElementById('in-tel').value = "";
            document.getElementById('in-notes').value = "";

            document.getElementById('side-panel').classList.remove('translate-x-full');
        }

        function closePanel() {
            document.getElementById('side-panel').classList.add('translate-x-full');
        }

        function saveData() {
            alert("입력한 데이터가 METIS 클라우드에 실시간 저장되었습니다.");
            closePanel();
        }
    </script>
</body>
</html>
